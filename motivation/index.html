
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Theodore Chang">
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../tutorial/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.7">
    
    
      
        <title>Motivation - msglc</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../color_scheme.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="pink">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#motivation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="msglc" class="md-header__button md-logo" aria-label="msglc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            msglc
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Motivation
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="pink"  aria-label="Turn off the lights"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Turn off the lights" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Turn on the lights"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Turn on the lights" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/TLCFEM/msglc" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  msglc

      </a>
    </li>
  

      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
    
  
  Motivation

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../tutorial/" class="md-tabs__link">
        
  
    
  
  Examples

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../benchmark/" class="md-tabs__link">
        
  
    
  
  Benchmark

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../api/utility/" class="md-tabs__link">
          
  
  API

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="msglc" class="md-nav__button md-logo" aria-label="msglc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    msglc
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/TLCFEM/msglc" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    msglc
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Motivation
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Motivation
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#structural-information" class="md-nav__link">
    <span class="md-ellipsis">
      Structural Information
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Structural Information">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#primitive-types-and-small-containers" class="md-nav__link">
    <span class="md-ellipsis">
      Primitive Types and Small Containers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dictionarymap" class="md-nav__link">
    <span class="md-ellipsis">
      Dictionary/Map
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#listarray" class="md-nav__link">
    <span class="md-ellipsis">
      List/Array
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#list-of-small-objects" class="md-nav__link">
    <span class="md-ellipsis">
      List of Small Objects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nested-structures" class="md-nav__link">
    <span class="md-ellipsis">
      Nested Structures
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#small-objects" class="md-nav__link">
    <span class="md-ellipsis">
      Small Objects
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#internal-layout" class="md-nav__link">
    <span class="md-ellipsis">
      Internal Layout
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../benchmark/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Benchmark
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/utility/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Utility
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/LazyReader/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LazyReader
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/LazyWriter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LazyWriter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/LazyCombiner/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LazyCombiner
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#structural-information" class="md-nav__link">
    <span class="md-ellipsis">
      Structural Information
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Structural Information">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#primitive-types-and-small-containers" class="md-nav__link">
    <span class="md-ellipsis">
      Primitive Types and Small Containers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dictionarymap" class="md-nav__link">
    <span class="md-ellipsis">
      Dictionary/Map
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#listarray" class="md-nav__link">
    <span class="md-ellipsis">
      List/Array
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#list-of-small-objects" class="md-nav__link">
    <span class="md-ellipsis">
      List of Small Objects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nested-structures" class="md-nav__link">
    <span class="md-ellipsis">
      Nested Structures
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#small-objects" class="md-nav__link">
    <span class="md-ellipsis">
      Small Objects
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#internal-layout" class="md-nav__link">
    <span class="md-ellipsis">
      Internal Layout
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="motivation">Motivation</h1>
<p><a href="https://msgpack.org/index.html">MessagePack</a> is a binary serialization format.
It can be used for data exchange and storage.</p>
<p>When it is used for storing large tree-like data, it has a significant shortcoming.
That is, whenever one wants to read some data from cold storage, even if only a small amount of data is required, the whole binary blob needs to be de-serialized.</p>
<p>This is due to the fact that <code>MessagePack</code> itself does not generate/store any structural metadata regarding the data to be serialized.
As a result, there is no way to know when the desired segment is located in the binary blob.
Thus, the whole thing needs to be decoded.
(To be precise, it is actually linear complexity, the worse case is to decode the whole thing.)</p>
<h2 id="structural-information">Structural Information</h2>
<p>Similar to the <a href="https://en.wikipedia.org/wiki/ZIP_(file_format)">design</a> of the zip format, it is possible to append a table of contents to the binary blob.
The table of contents contains the structural information of the serialized data, serves as a lookup table, and is encoded as well.</p>
<p>Whenever read operations are required, the table of contents is read first.
Ideally, the table of contents is much smaller than the original binary blob.
Thus, the overhead of reading the table of contents is negligible.
After the table of contents is read, the desired segment can be located and decoded directly.
This would significantly reduce the amount of data that needs to be decoded if only a small amount of data is required.</p>
<h3 id="primitive-types-and-small-containers">Primitive Types and Small Containers</h3>
<p>For primitive types, the table of contents stores the start and end positions of the serialized data.</p>
<p>For example, the table of contents of the integer <code>a=10251585</code> would look like as follows.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">1</a></span>
<span class="normal"><a href="#__codelineno-0-2">2</a></span>
<span class="normal"><a href="#__codelineno-0-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="p">{</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a>  <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">]</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>The <code>p</code> stands for position, and only a single character is used to save space.</p>
<p>This applies to small containers.</p>
<h3 id="dictionarymap">Dictionary/Map</h3>
<p>Apart from the <code>p</code> field that stores the start and end positions of the whole dictionary, to allow nested lookups, the table of contents also contains the tables of contents of the children under the <code>t</code> field.</p>
<p>For example, the table of contents of the dictionary <code>d={"a": 1, "b": 2}</code> would look like as follows.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1">1</a></span>
<span class="normal"><a href="#__codelineno-1-2">2</a></span>
<span class="normal"><a href="#__codelineno-1-3">3</a></span>
<span class="normal"><a href="#__codelineno-1-4">4</a></span>
<span class="normal"><a href="#__codelineno-1-5">5</a></span>
<span class="normal"><a href="#__codelineno-1-6">6</a></span>
<span class="normal"><a href="#__codelineno-1-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="p">{</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a>  <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">],</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a>  <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a>    <span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">]},</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a>    <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">]}</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a>  <span class="p">}</span>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>The <code>t</code> stands for table, and only a single character is used to save space.
The <code>t</code> field is a dictionary.</p>
<h3 id="listarray">List/Array</h3>
<p>Similar to the dictionary, the table of contents of a list also contains the tables of contents of the children.</p>
<p>For example, the table of contents of the list <code>l=[1, 2, 3]</code> would look like as follows.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1">1</a></span>
<span class="normal"><a href="#__codelineno-2-2">2</a></span>
<span class="normal"><a href="#__codelineno-2-3">3</a></span>
<span class="normal"><a href="#__codelineno-2-4">4</a></span>
<span class="normal"><a href="#__codelineno-2-5">5</a></span>
<span class="normal"><a href="#__codelineno-2-6">6</a></span>
<span class="normal"><a href="#__codelineno-2-7">7</a></span>
<span class="normal"><a href="#__codelineno-2-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="p">{</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a>  <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">],</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a>  <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="p">[</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a>    <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">]},</span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a>    <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">]},</span>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a>    <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">]}</span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a>  <span class="p">]</span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>The <code>t</code> field is a list.</p>
<h3 id="list-of-small-objects">List of Small Objects</h3>
<p>For lists of small objects, storing the table of contents of each child is not efficient.
An alternative format of table of contents is used.</p>
<p>For example, the table of contents of the list <code>l=[x for x in range(100000)]</code> would look like as follows.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span>
<span class="normal"><a href="#__codelineno-3-2">2</a></span>
<span class="normal"><a href="#__codelineno-3-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="p">{</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a>  <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[[</span><span class="n">size</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">],</span> <span class="p">[</span><span class="n">size</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">],</span> <span class="o">...</span><span class="p">]</span>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>The small objects are grouped together, and the <code>size</code> field is used to indicate the number of small objects in the group.
The size of the group can be adjusted to achieve optimal performance.</p>
<h3 id="nested-structures">Nested Structures</h3>
<p>All above formats contain a <code>p</code> field.</p>
<p>To support recursively packing serialized data, the following format is also used.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-4-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-4-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-4-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-4-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-4-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-4-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-4-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-4-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-4-10">10</a></span>
<span class="normal"><a href="#__codelineno-4-11">11</a></span>
<span class="normal"><a href="#__codelineno-4-12">12</a></span>
<span class="normal"><a href="#__codelineno-4-13">13</a></span>
<span class="normal"><a href="#__codelineno-4-14">14</a></span>
<span class="normal"><a href="#__codelineno-4-15">15</a></span>
<span class="normal"><a href="#__codelineno-4-16">16</a></span>
<span class="normal"><a href="#__codelineno-4-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="c1"># for packing a dict of packed data</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="p">{</span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a>  <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a>    <span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="n">start</span><span class="p">,</span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a>    <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="n">start</span><span class="p">,</span>
<a id="__codelineno-4-6" name="__codelineno-4-6"></a>    <span class="o">...</span>
<a id="__codelineno-4-7" name="__codelineno-4-7"></a>  <span class="p">}</span>
<a id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="p">}</span>
<a id="__codelineno-4-9" name="__codelineno-4-9"></a>
<a id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="c1"># for packing a list of packed data</span>
<a id="__codelineno-4-11" name="__codelineno-4-11"></a><span class="p">{</span>
<a id="__codelineno-4-12" name="__codelineno-4-12"></a>  <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="p">[</span>
<a id="__codelineno-4-13" name="__codelineno-4-13"></a>    <span class="n">start</span><span class="p">,</span>
<a id="__codelineno-4-14" name="__codelineno-4-14"></a>    <span class="n">start</span><span class="p">,</span>
<a id="__codelineno-4-15" name="__codelineno-4-15"></a>    <span class="o">...</span>
<a id="__codelineno-4-16" name="__codelineno-4-16"></a>  <span class="p">]</span>
<a id="__codelineno-4-17" name="__codelineno-4-17"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Since the packed data is already serialized, it would contain the table of contents.
It is only necessary to store the start position of the packed data.</p>
<h3 id="small-objects">Small Objects</h3>
<p>If the data to be serialized is mainly structure, generating the corresponding table of contents would potentially result in a table of contents that is larger than the original data.</p>
<p>It is possible to define a threshold, such that for any given node in the tree, if the size of the node is smaller than the threshold, the node is considered a small object.
For small objects, the <code>t</code> field is omitted.</p>
<p>The following is an example.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1">  1</a></span>
<span class="normal"><a href="#__codelineno-5-2">  2</a></span>
<span class="normal"><a href="#__codelineno-5-3">  3</a></span>
<span class="normal"><a href="#__codelineno-5-4">  4</a></span>
<span class="normal"><a href="#__codelineno-5-5">  5</a></span>
<span class="normal"><a href="#__codelineno-5-6">  6</a></span>
<span class="normal"><a href="#__codelineno-5-7">  7</a></span>
<span class="normal"><a href="#__codelineno-5-8">  8</a></span>
<span class="normal"><a href="#__codelineno-5-9">  9</a></span>
<span class="normal"><a href="#__codelineno-5-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-5-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-5-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-5-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-5-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-5-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-5-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-5-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-5-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-5-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-5-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-5-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-5-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-5-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-5-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-5-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-5-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-5-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-5-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-5-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-5-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-5-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-5-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-5-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-5-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-5-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-5-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-5-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-5-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-5-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-5-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-5-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-5-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-5-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-5-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-5-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-5-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-5-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-5-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-5-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-5-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-5-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-5-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-5-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-5-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-5-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-5-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-5-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-5-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-5-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-5-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-5-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-5-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-5-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-5-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-5-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-5-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-5-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-5-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-5-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-5-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-5-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-5-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-5-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-5-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-5-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-5-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-5-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-5-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-5-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-5-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-5-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-5-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-5-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-5-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-5-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-5-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-5-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-5-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-5-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-5-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-5-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-5-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-5-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-5-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-5-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-5-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-5-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-5-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-5-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-5-100">100</a></span>
<span class="normal"><a href="#__codelineno-5-101">101</a></span>
<span class="normal"><a href="#__codelineno-5-102">102</a></span>
<span class="normal"><a href="#__codelineno-5-103">103</a></span>
<span class="normal"><a href="#__codelineno-5-104">104</a></span>
<span class="normal"><a href="#__codelineno-5-105">105</a></span>
<span class="normal"><a href="#__codelineno-5-106">106</a></span>
<span class="normal"><a href="#__codelineno-5-107">107</a></span>
<span class="normal"><a href="#__codelineno-5-108">108</a></span>
<span class="normal"><a href="#__codelineno-5-109">109</a></span>
<span class="normal"><a href="#__codelineno-5-110">110</a></span>
<span class="normal"><a href="#__codelineno-5-111">111</a></span>
<span class="normal"><a href="#__codelineno-5-112">112</a></span>
<span class="normal"><a href="#__codelineno-5-113">113</a></span>
<span class="normal"><a href="#__codelineno-5-114">114</a></span>
<span class="normal"><a href="#__codelineno-5-115">115</a></span>
<span class="normal"><a href="#__codelineno-5-116">116</a></span>
<span class="normal"><a href="#__codelineno-5-117">117</a></span>
<span class="normal"><a href="#__codelineno-5-118">118</a></span>
<span class="normal"><a href="#__codelineno-5-119">119</a></span>
<span class="normal"><a href="#__codelineno-5-120">120</a></span>
<span class="normal"><a href="#__codelineno-5-121">121</a></span>
<span class="normal"><a href="#__codelineno-5-122">122</a></span>
<span class="normal"><a href="#__codelineno-5-123">123</a></span>
<span class="normal"><a href="#__codelineno-5-124">124</a></span>
<span class="normal"><a href="#__codelineno-5-125">125</a></span>
<span class="normal"><a href="#__codelineno-5-126">126</a></span>
<span class="normal"><a href="#__codelineno-5-127">127</a></span>
<span class="normal"><a href="#__codelineno-5-128">128</a></span>
<span class="normal"><a href="#__codelineno-5-129">129</a></span>
<span class="normal"><a href="#__codelineno-5-130">130</a></span>
<span class="normal"><a href="#__codelineno-5-131">131</a></span>
<span class="normal"><a href="#__codelineno-5-132">132</a></span>
<span class="normal"><a href="#__codelineno-5-133">133</a></span>
<span class="normal"><a href="#__codelineno-5-134">134</a></span>
<span class="normal"><a href="#__codelineno-5-135">135</a></span>
<span class="normal"><a href="#__codelineno-5-136">136</a></span>
<span class="normal"><a href="#__codelineno-5-137">137</a></span>
<span class="normal"><a href="#__codelineno-5-138">138</a></span>
<span class="normal"><a href="#__codelineno-5-139">139</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="c1"># data</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="p">{</span>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a>  <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="p">[</span>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a>    <span class="p">{</span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a>      <span class="s2">&quot;BlYFs&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a>        <span class="s2">&quot;KNzFKfIR2&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span>
<a id="__codelineno-5-7" name="__codelineno-5-7"></a>        <span class="s2">&quot;DZFf0InHcO&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;t32qEJJPII&quot;</span><span class="p">:</span> <span class="mi">820701623</span><span class="p">,</span> <span class="s2">&quot;RuUbcdXGT&quot;</span><span class="p">:</span> <span class="mf">0.07535274189499452</span><span class="p">},</span>
<a id="__codelineno-5-8" name="__codelineno-5-8"></a>      <span class="p">},</span>
<a id="__codelineno-5-9" name="__codelineno-5-9"></a>      <span class="s2">&quot;SWCWj&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-5-10" name="__codelineno-5-10"></a>        <span class="s2">&quot;T5Jm7j1p99&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;yEsYr8Ww&quot;</span><span class="p">:</span> <span class="s2">&quot;1lgCDlDR&quot;</span><span class="p">,</span> <span class="s2">&quot;1041dt7DYk&quot;</span><span class="p">:</span> <span class="s2">&quot;XQUFG&quot;</span><span class="p">},</span>
<a id="__codelineno-5-11" name="__codelineno-5-11"></a>        <span class="s2">&quot;ZJejJRP&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;SCIVA7Lb&quot;</span><span class="p">:</span> <span class="mf">0.5045895502672991</span><span class="p">,</span> <span class="s2">&quot;p5I3XN3&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
<a id="__codelineno-5-12" name="__codelineno-5-12"></a>      <span class="p">},</span>
<a id="__codelineno-5-13" name="__codelineno-5-13"></a>    <span class="p">},</span>
<a id="__codelineno-5-14" name="__codelineno-5-14"></a>    <span class="p">{</span>
<a id="__codelineno-5-15" name="__codelineno-5-15"></a>      <span class="s2">&quot;vRpNA5&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-5-16" name="__codelineno-5-16"></a>        <span class="s2">&quot;0HNVOgUVHs&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;EsvObl4Q3&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1008950541</span><span class="p">,</span> <span class="s2">&quot;SacDVqMG&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">764697401</span><span class="p">},</span>
<a id="__codelineno-5-17" name="__codelineno-5-17"></a>        <span class="s2">&quot;XLK694&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;UdRKNQBrku&quot;</span><span class="p">:</span> <span class="s2">&quot;64jiA4nTf&quot;</span><span class="p">,</span> <span class="s2">&quot;dTPdzp7Cd&quot;</span><span class="p">:</span> <span class="s2">&quot;bC6R6Q&quot;</span><span class="p">},</span>
<a id="__codelineno-5-18" name="__codelineno-5-18"></a>      <span class="p">},</span>
<a id="__codelineno-5-19" name="__codelineno-5-19"></a>      <span class="s2">&quot;3uyABlBlY&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;7umSPsl7&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;gFa9yuPyQ&quot;</span><span class="p">:</span> <span class="mf">0.24175848344688433</span><span class="p">,</span> <span class="s2">&quot;UYa6UiMDZ7&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span> <span class="s2">&quot;zuP2wLok&quot;</span><span class="p">:</span> <span class="s2">&quot;G9k2y&quot;</span><span class="p">},</span>
<a id="__codelineno-5-20" name="__codelineno-5-20"></a>    <span class="p">},</span>
<a id="__codelineno-5-21" name="__codelineno-5-21"></a>  <span class="p">]</span>
<a id="__codelineno-5-22" name="__codelineno-5-22"></a><span class="p">}</span>
<a id="__codelineno-5-23" name="__codelineno-5-23"></a>
<a id="__codelineno-5-24" name="__codelineno-5-24"></a><span class="c1"># table of contents (full)</span>
<a id="__codelineno-5-25" name="__codelineno-5-25"></a><span class="p">{</span>
<a id="__codelineno-5-26" name="__codelineno-5-26"></a>  <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-5-27" name="__codelineno-5-27"></a>    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-5-28" name="__codelineno-5-28"></a>      <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="p">[</span>
<a id="__codelineno-5-29" name="__codelineno-5-29"></a>        <span class="p">{</span>
<a id="__codelineno-5-30" name="__codelineno-5-30"></a>          <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-5-31" name="__codelineno-5-31"></a>            <span class="s2">&quot;BlYFs&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-5-32" name="__codelineno-5-32"></a>              <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-5-33" name="__codelineno-5-33"></a>                <span class="s2">&quot;KNzFKfIR2&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">23</span><span class="p">,</span> <span class="mi">26</span><span class="p">]},</span>
<a id="__codelineno-5-34" name="__codelineno-5-34"></a>                <span class="s2">&quot;DZFf0InHcO&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-5-35" name="__codelineno-5-35"></a>                  <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;t32qEJJPII&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">49</span><span class="p">,</span> <span class="mi">54</span><span class="p">]},</span> <span class="s2">&quot;RuUbcdXGT&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">64</span><span class="p">,</span> <span class="mi">73</span><span class="p">]}},</span>
<a id="__codelineno-5-36" name="__codelineno-5-36"></a>                  <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">37</span><span class="p">,</span> <span class="mi">73</span><span class="p">],</span>
<a id="__codelineno-5-37" name="__codelineno-5-37"></a>                <span class="p">},</span>
<a id="__codelineno-5-38" name="__codelineno-5-38"></a>              <span class="p">},</span>
<a id="__codelineno-5-39" name="__codelineno-5-39"></a>              <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">73</span><span class="p">],</span>
<a id="__codelineno-5-40" name="__codelineno-5-40"></a>            <span class="p">},</span>
<a id="__codelineno-5-41" name="__codelineno-5-41"></a>            <span class="s2">&quot;SWCWj&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-5-42" name="__codelineno-5-42"></a>              <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-5-43" name="__codelineno-5-43"></a>                <span class="s2">&quot;T5Jm7j1p99&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-5-44" name="__codelineno-5-44"></a>                  <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;yEsYr8Ww&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">101</span><span class="p">,</span> <span class="mi">110</span><span class="p">]},</span> <span class="s2">&quot;1041dt7DYk&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">121</span><span class="p">,</span> <span class="mi">127</span><span class="p">]}},</span>
<a id="__codelineno-5-45" name="__codelineno-5-45"></a>                  <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">91</span><span class="p">,</span> <span class="mi">127</span><span class="p">],</span>
<a id="__codelineno-5-46" name="__codelineno-5-46"></a>                <span class="p">},</span>
<a id="__codelineno-5-47" name="__codelineno-5-47"></a>                <span class="s2">&quot;ZJejJRP&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-5-48" name="__codelineno-5-48"></a>                  <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;SCIVA7Lb&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">145</span><span class="p">,</span> <span class="mi">154</span><span class="p">]},</span> <span class="s2">&quot;p5I3XN3&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">162</span><span class="p">,</span> <span class="mi">163</span><span class="p">]}},</span>
<a id="__codelineno-5-49" name="__codelineno-5-49"></a>                  <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">135</span><span class="p">,</span> <span class="mi">163</span><span class="p">],</span>
<a id="__codelineno-5-50" name="__codelineno-5-50"></a>                <span class="p">},</span>
<a id="__codelineno-5-51" name="__codelineno-5-51"></a>              <span class="p">},</span>
<a id="__codelineno-5-52" name="__codelineno-5-52"></a>              <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">79</span><span class="p">,</span> <span class="mi">163</span><span class="p">],</span>
<a id="__codelineno-5-53" name="__codelineno-5-53"></a>            <span class="p">},</span>
<a id="__codelineno-5-54" name="__codelineno-5-54"></a>          <span class="p">},</span>
<a id="__codelineno-5-55" name="__codelineno-5-55"></a>          <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">163</span><span class="p">],</span>
<a id="__codelineno-5-56" name="__codelineno-5-56"></a>        <span class="p">},</span>
<a id="__codelineno-5-57" name="__codelineno-5-57"></a>        <span class="p">{</span>
<a id="__codelineno-5-58" name="__codelineno-5-58"></a>          <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-5-59" name="__codelineno-5-59"></a>            <span class="s2">&quot;vRpNA5&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-5-60" name="__codelineno-5-60"></a>              <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-5-61" name="__codelineno-5-61"></a>                <span class="s2">&quot;0HNVOgUVHs&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-5-62" name="__codelineno-5-62"></a>                  <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;EsvObl4Q3&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">194</span><span class="p">,</span> <span class="mi">199</span><span class="p">]},</span> <span class="s2">&quot;SacDVqMG&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">208</span><span class="p">,</span> <span class="mi">213</span><span class="p">]}},</span>
<a id="__codelineno-5-63" name="__codelineno-5-63"></a>                  <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">183</span><span class="p">,</span> <span class="mi">213</span><span class="p">],</span>
<a id="__codelineno-5-64" name="__codelineno-5-64"></a>                <span class="p">},</span>
<a id="__codelineno-5-65" name="__codelineno-5-65"></a>                <span class="s2">&quot;XLK694&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-5-66" name="__codelineno-5-66"></a>                  <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;UdRKNQBrku&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">232</span><span class="p">,</span> <span class="mi">242</span><span class="p">]},</span> <span class="s2">&quot;dTPdzp7Cd&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">252</span><span class="p">,</span> <span class="mi">259</span><span class="p">]}},</span>
<a id="__codelineno-5-67" name="__codelineno-5-67"></a>                  <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">220</span><span class="p">,</span> <span class="mi">259</span><span class="p">],</span>
<a id="__codelineno-5-68" name="__codelineno-5-68"></a>                <span class="p">},</span>
<a id="__codelineno-5-69" name="__codelineno-5-69"></a>              <span class="p">},</span>
<a id="__codelineno-5-70" name="__codelineno-5-70"></a>              <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">171</span><span class="p">,</span> <span class="mi">259</span><span class="p">],</span>
<a id="__codelineno-5-71" name="__codelineno-5-71"></a>            <span class="p">},</span>
<a id="__codelineno-5-72" name="__codelineno-5-72"></a>            <span class="s2">&quot;3uyABlBlY&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-5-73" name="__codelineno-5-73"></a>              <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-5-74" name="__codelineno-5-74"></a>                <span class="s2">&quot;7umSPsl7&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-5-75" name="__codelineno-5-75"></a>                  <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;gFa9yuPyQ&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">290</span><span class="p">,</span> <span class="mi">299</span><span class="p">]},</span> <span class="s2">&quot;UYa6UiMDZ7&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">310</span><span class="p">,</span> <span class="mi">311</span><span class="p">]}},</span>
<a id="__codelineno-5-76" name="__codelineno-5-76"></a>                  <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">279</span><span class="p">,</span> <span class="mi">311</span><span class="p">],</span>
<a id="__codelineno-5-77" name="__codelineno-5-77"></a>                <span class="p">},</span>
<a id="__codelineno-5-78" name="__codelineno-5-78"></a>                <span class="s2">&quot;zuP2wLok&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">320</span><span class="p">,</span> <span class="mi">326</span><span class="p">]},</span>
<a id="__codelineno-5-79" name="__codelineno-5-79"></a>              <span class="p">},</span>
<a id="__codelineno-5-80" name="__codelineno-5-80"></a>              <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">269</span><span class="p">,</span> <span class="mi">326</span><span class="p">],</span>
<a id="__codelineno-5-81" name="__codelineno-5-81"></a>            <span class="p">},</span>
<a id="__codelineno-5-82" name="__codelineno-5-82"></a>          <span class="p">},</span>
<a id="__codelineno-5-83" name="__codelineno-5-83"></a>          <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">163</span><span class="p">,</span> <span class="mi">326</span><span class="p">],</span>
<a id="__codelineno-5-84" name="__codelineno-5-84"></a>        <span class="p">},</span>
<a id="__codelineno-5-85" name="__codelineno-5-85"></a>      <span class="p">],</span>
<a id="__codelineno-5-86" name="__codelineno-5-86"></a>      <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">326</span><span class="p">],</span>
<a id="__codelineno-5-87" name="__codelineno-5-87"></a>    <span class="p">}</span>
<a id="__codelineno-5-88" name="__codelineno-5-88"></a>  <span class="p">},</span>
<a id="__codelineno-5-89" name="__codelineno-5-89"></a>  <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">326</span><span class="p">],</span>
<a id="__codelineno-5-90" name="__codelineno-5-90"></a><span class="p">}</span>
<a id="__codelineno-5-91" name="__codelineno-5-91"></a>
<a id="__codelineno-5-92" name="__codelineno-5-92"></a><span class="c1"># table of contents (minimum block size 10 bytes)</span>
<a id="__codelineno-5-93" name="__codelineno-5-93"></a><span class="p">{</span>
<a id="__codelineno-5-94" name="__codelineno-5-94"></a>  <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-5-95" name="__codelineno-5-95"></a>    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-5-96" name="__codelineno-5-96"></a>      <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="p">[</span>
<a id="__codelineno-5-97" name="__codelineno-5-97"></a>        <span class="p">{</span>
<a id="__codelineno-5-98" name="__codelineno-5-98"></a>          <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-5-99" name="__codelineno-5-99"></a>            <span class="s2">&quot;BlYFs&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;KNzFKfIR2&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">23</span><span class="p">,</span> <span class="mi">26</span><span class="p">]},</span> <span class="s2">&quot;DZFf0InHcO&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">37</span><span class="p">,</span> <span class="mi">73</span><span class="p">]}},</span> <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">73</span><span class="p">]},</span>
<a id="__codelineno-5-100" name="__codelineno-5-100"></a>            <span class="s2">&quot;SWCWj&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;T5Jm7j1p99&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">91</span><span class="p">,</span> <span class="mi">127</span><span class="p">]},</span> <span class="s2">&quot;ZJejJRP&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">135</span><span class="p">,</span> <span class="mi">163</span><span class="p">]}},</span> <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">79</span><span class="p">,</span> <span class="mi">163</span><span class="p">]},</span>
<a id="__codelineno-5-101" name="__codelineno-5-101"></a>          <span class="p">},</span>
<a id="__codelineno-5-102" name="__codelineno-5-102"></a>          <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">163</span><span class="p">],</span>
<a id="__codelineno-5-103" name="__codelineno-5-103"></a>        <span class="p">},</span>
<a id="__codelineno-5-104" name="__codelineno-5-104"></a>        <span class="p">{</span>
<a id="__codelineno-5-105" name="__codelineno-5-105"></a>          <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-5-106" name="__codelineno-5-106"></a>            <span class="s2">&quot;vRpNA5&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-5-107" name="__codelineno-5-107"></a>              <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;0HNVOgUVHs&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">183</span><span class="p">,</span> <span class="mi">213</span><span class="p">]},</span> <span class="s2">&quot;XLK694&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">220</span><span class="p">,</span> <span class="mi">259</span><span class="p">]}},</span>
<a id="__codelineno-5-108" name="__codelineno-5-108"></a>              <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">171</span><span class="p">,</span> <span class="mi">259</span><span class="p">],</span>
<a id="__codelineno-5-109" name="__codelineno-5-109"></a>            <span class="p">},</span>
<a id="__codelineno-5-110" name="__codelineno-5-110"></a>            <span class="s2">&quot;3uyABlBlY&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-5-111" name="__codelineno-5-111"></a>              <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;7umSPsl7&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">279</span><span class="p">,</span> <span class="mi">311</span><span class="p">]},</span> <span class="s2">&quot;zuP2wLok&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">320</span><span class="p">,</span> <span class="mi">326</span><span class="p">]}},</span>
<a id="__codelineno-5-112" name="__codelineno-5-112"></a>              <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">269</span><span class="p">,</span> <span class="mi">326</span><span class="p">],</span>
<a id="__codelineno-5-113" name="__codelineno-5-113"></a>            <span class="p">},</span>
<a id="__codelineno-5-114" name="__codelineno-5-114"></a>          <span class="p">},</span>
<a id="__codelineno-5-115" name="__codelineno-5-115"></a>          <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">163</span><span class="p">,</span> <span class="mi">326</span><span class="p">],</span>
<a id="__codelineno-5-116" name="__codelineno-5-116"></a>        <span class="p">},</span>
<a id="__codelineno-5-117" name="__codelineno-5-117"></a>      <span class="p">],</span>
<a id="__codelineno-5-118" name="__codelineno-5-118"></a>      <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">326</span><span class="p">],</span>
<a id="__codelineno-5-119" name="__codelineno-5-119"></a>    <span class="p">}</span>
<a id="__codelineno-5-120" name="__codelineno-5-120"></a>  <span class="p">},</span>
<a id="__codelineno-5-121" name="__codelineno-5-121"></a>  <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">326</span><span class="p">],</span>
<a id="__codelineno-5-122" name="__codelineno-5-122"></a><span class="p">}</span>
<a id="__codelineno-5-123" name="__codelineno-5-123"></a>
<a id="__codelineno-5-124" name="__codelineno-5-124"></a><span class="c1"># table of contents (minimum block size 100 bytes)</span>
<a id="__codelineno-5-125" name="__codelineno-5-125"></a><span class="p">{</span>
<a id="__codelineno-5-126" name="__codelineno-5-126"></a>  <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-5-127" name="__codelineno-5-127"></a>    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-5-128" name="__codelineno-5-128"></a>      <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="p">[</span>
<a id="__codelineno-5-129" name="__codelineno-5-129"></a>        <span class="p">{</span><span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;BlYFs&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">73</span><span class="p">]},</span> <span class="s2">&quot;SWCWj&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">79</span><span class="p">,</span> <span class="mi">163</span><span class="p">]}},</span> <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">163</span><span class="p">]},</span>
<a id="__codelineno-5-130" name="__codelineno-5-130"></a>        <span class="p">{</span><span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;vRpNA5&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">171</span><span class="p">,</span> <span class="mi">259</span><span class="p">]},</span> <span class="s2">&quot;3uyABlBlY&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">269</span><span class="p">,</span> <span class="mi">326</span><span class="p">]}},</span> <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">163</span><span class="p">,</span> <span class="mi">326</span><span class="p">]},</span>
<a id="__codelineno-5-131" name="__codelineno-5-131"></a>      <span class="p">],</span>
<a id="__codelineno-5-132" name="__codelineno-5-132"></a>      <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">326</span><span class="p">],</span>
<a id="__codelineno-5-133" name="__codelineno-5-133"></a>    <span class="p">}</span>
<a id="__codelineno-5-134" name="__codelineno-5-134"></a>  <span class="p">},</span>
<a id="__codelineno-5-135" name="__codelineno-5-135"></a>  <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">326</span><span class="p">],</span>
<a id="__codelineno-5-136" name="__codelineno-5-136"></a><span class="p">}</span>
<a id="__codelineno-5-137" name="__codelineno-5-137"></a>
<a id="__codelineno-5-138" name="__codelineno-5-138"></a><span class="c1"># table of contents (minimum block size 1000 bytes)</span>
<a id="__codelineno-5-139" name="__codelineno-5-139"></a><span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">326</span><span class="p">]}</span>
</code></pre></div></td></tr></table></div>
<p>By controlling the block size, one can determine which format shall be used for a specific node.
A small block size would result in a more detailed table of contents, its size would be relatively larger.
But each actual read operation would be smaller.
A large block size would result in a more compact table of contents, its size would be relatively smaller.
But each actual read operation would be larger.</p>
<p>It is guaranteed that each read operation would fetch at least one block of data.
Depending on the actual operating system and the underlying storage hardware, the optimal block size may vary.
One shall experiment with different block sizes to find the optimal one.</p>
<h2 id="internal-layout">Internal Layout</h2>
<p>For a single serialized file, the following layout is used.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span>
<span class="normal"><a href="#__codelineno-6-2">2</a></span>
<span class="normal"><a href="#__codelineno-6-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a>#####################################################################
<a id="__codelineno-6-2" name="__codelineno-6-2"></a># magic bytes # 20 bytes # encoded data # encoded table of contents #
<a id="__codelineno-6-3" name="__codelineno-6-3"></a>#####################################################################
</code></pre></div></td></tr></table></div>
<p>It contains four parts.</p>
<ol>
<li>The magic bytes are used to identify the format of the file.</li>
<li>The 20 bytes are used to store the start position and the length of the encoded table of contents.</li>
<li>The encoded data.</li>
<li>The encoded table of contents is the table of contents encoded in msgpack.</li>
</ol>
<p>The table of contents is placed at the end of the file to allow direct writing of the encoded data to the file.
This makes the memory footprint small.</p>
<p>The encoded data is self-contained.
It can be read and decoded without the table of contents.</p>
<p>The same layout can be recursively used.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href=".." class="md-footer__link md-footer__link--prev" aria-label="Previous: msglc">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                msglc
              </div>
            </div>
          </a>
        
        
          
          <a href="../tutorial/" class="md-footer__link md-footer__link--next" aria-label="Next: Examples">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Examples
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright © 2024 Theodore Chang
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.footer"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>